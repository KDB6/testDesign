<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>animation</title>

    <link rel="stylesheet" href="../assets/css/common.css" />
    <link rel="stylesheet" href="../assets/css/font.css" />
    <link rel="stylesheet" href="../assets/css/reset.css" />

    <link rel="stylesheet" href="../assets/css/animation.css" />
  </head>
  <body>
    <section id="animation" class="container">
      <!-- card -->
      <article class="card">
        <div class="card__new">
          <div class="card1">
            <h2>CARD</h2>
          </div>
        </div>
        <div class="card__existing">
          <div class="card2">
            <h2>CARD</h2>
          </div>
          <div class="card3">
            <h2>CARD</h2>
          </div>
          <div class="card4">
            <h2>CARD</h2>
          </div>
          <div class="card5">
            <h2>CARD</h2>
          </div>
        </div>
      </article>

      <!-- graph -->
      <article id="graph">
        <div class="graph">
          <div class="bar1 graph-ani"></div>
          <div class="bar2 graph-ani"></div>
          <div class="bar3 graph-ani"></div>
          <div class="bar4 graph-ani"></div>
        </div>
      </article>

      <!-- number -->
      <article>
        <div class="number">0</div>
      </article>
    </section>

    <!-- gsap -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.3/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.3/ScrollTrigger.min.js"></script>
    <script>
      let c1 = gsap.timeline({ delay: 5, repeat: -1, repeatDelay: 5 });
      let c2 = gsap.timeline({ delay: 5, repeat: -1, repeatDelay: 5 });
      c1.from(
        ".card1",
        {
          x: -100,
          opacity: 0,
          duration: 2,
          ease: "power4",
        },
        0
      );
      c1.from(
        ".card1 > h2",
        {
          color: "#3f53ff",
        },
        0
      );

      c2.to(
        ".card__existing",
        {
          y: 95,
          duration: 2,
          ease: "power4",
        },
        0
      );
    </script>

    <!-- animation -->
    <script>
      const card1 = document.querySelector(".card1");
      const card2 = document.querySelector(".card2");
      const card3 = document.querySelector(".card3");

      const counter = ($counter, max) => {
        let now = max;
        const handle = setInterval(() => {
          $counter.innerHTML = Math.ceil(max - now);

          // 목표수치에 도달하면 정지
          if (now < 1) {
            clearInterval(handle);
          }

          // 증가되는 값이 계속하여 작아짐
          const step = now / 10;

          // 값을 적용시키면서 다음 차례에 영향을 끼침
          now -= step;
        }, 30);
      };

      window.onload = () => {
        // 카운트를 적용시킬 요소
        const $counter = document.querySelector(".number");

        // 목표 수치
        const max = 100;

        setTimeout(() => counter($counter, max), 30);
      };

      setInterval(function () {
        "?";
      }, 1000);
    </script>
  </body>
</html>
